[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

# Nginx 服务
[program:nginx]
command=nginx -g 'daemon off;'
autostart=true
autorestart=true
priority=10
stdout_logfile=/var/log/supervisor/nginx-stdout.log
stderr_logfile=/var/log/supervisor/nginx-stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB

# 后端 Rust 服务
[program:backend]
command=/app/backend
directory=/app
autostart=true
autorestart=true
priority=5
environment=RUST_LOG="info",HOST="127.0.0.1",PORT="8080"
stdout_logfile=/var/log/supervisor/backend-stdout.log
stderr_logfile=/var/log/supervisor/backend-stderr.log
stdout_logfile_maxbytes=10MB
stderr_logfile_maxbytes=10MB
